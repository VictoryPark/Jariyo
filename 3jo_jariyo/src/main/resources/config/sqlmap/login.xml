<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jariyo.repository.mapper.LoginMapper"> <!-- 루트태그 -->
	<resultMap type="Member" id="memberMap">
		<result column="no" property="no"/>
		<result column="id" property="id"/>
		<result column="name" property="name"/>
		<result column="email" property="email"/>
		<result column="password" property="password"/>
		<result column="phone_no" property="phoneNo"/>
		<result column="road_addr" property="roadAddr"/>
		<result column="detail_addr" property="detailAddr"/>
		<result column="post_no" property="postNo"/>
		<result column="position_x" property="positionX"/>
		<result column="position_y" property="positionY"/>
		<result column="birth_date" property="birthDate"/>
		<result column="team_name" property="teamName"/>
		<result column="profile_img_path" property="profileImgPath"/>
		<result column="profile_img_name" property="profileImgName"/>
		<result column="log_on" property="logOn"/>
	</resultMap>
	
	<!-- 로그인하기 -->
	<select id="selectMemberInfo" parameterType="Member" resultMap="memberMap">
		select *
		  from jariyo_member
		 where email = #{email}
		   and password = #{password}
	</select>
	
	<!-- 로그인한 id찾아서 로그인 했다고 표시하기. -->
	<update id="updateLogonToIn" parameterType="string">
		update jariyo_member
		   set log_on = 'y'
		 where email = #{email}
	</update>
	
	<!-- 로그아웃 -->
	<update id="updateLogonToOut">
		update jariyo_member
		   set log_on = 'n'
		 where log_on = 'y'
	</update>
	
	<!-- 로그인된 id 찾기 -->
	<select id="selectLogon" resultType="string">
		select id
		  from jariyo_member
		 where log_on = 'y'
	</select>
</mapper>